# Implementation Plan

- [ ] 1. プロジェクト構造の整理
  - [x] 1.1 SQLファイルの整理と分類
    - db/migrations、db/scripts、db/schemaディレクトリを作成し、SQLファイルを適切に分類する
    - 不要なSQLファイルを特定して削除する
    - _Requirements: 1.1, 1.2, 4.1, 4.2_
  
  - [ ] 1.2 ディレクトリ構造の最適化
    - 新しいディレクトリ（types、config、lib/hooks、lib/utils）を作成する
    - 既存のファイルを適切なディレクトリに移動する
    - _Requirements: 1.3, 3.2_
  
  - [ ] 1.3 重複ディレクトリの統合
    - match-recorderディレクトリの内容を確認し、必要なファイルをメインプロジェクトに統合する
    - 不要なディレクトリを削除する
    - _Requirements: 1.2, 2.2_

- [ ] 2. 依存関係の整理
  - [ ] 2.1 package.jsonの依存関係分析
    - 未使用の依存関係を特定する
    - package.jsonから未使用の依存関係を削除する
    - _Requirements: 2.1, 2.3_
  
  - [ ] 2.2 コード内の未使用インポートの削除
    - TypeScriptファイル内の未使用インポートを特定する
    - 未使用インポートを削除する
    - _Requirements: 2.2_

- [ ] 3. 型システムの強化
  - [ ] 3.1 共通型定義ファイルの作成
    - types/supabase.tsファイルを作成し、データベースモデルの型定義を実装する
    - types/api.tsファイルを作成し、API関連の型定義を実装する
    - types/components.tsファイルを作成し、コンポーネント関連の型定義を実装する
    - _Requirements: 5.1_
  
  - [ ] 3.2 既存コードの型アノテーション強化
    - コンポーネントのprops型を明示的に定義する
    - 関数の引数と戻り値の型を明示的に定義する
    - _Requirements: 5.1_

- [ ] 4. エラーハンドリングの改善
  - [ ] 4.1 エラーユーティリティの実装
    - lib/utils/error.tsファイルを作成し、共通エラーハンドリング関数を実装する
    - APIエラー用のカスタムエラークラスを実装する
    - _Requirements: 5.2_
  
  - [ ] 4.2 コンポーネントエラーハンドリングの実装
    - components/ui/error-boundary.tsxファイルを作成し、エラーバウンダリコンポーネントを実装する
    - ローディング状態とエラー状態を適切に処理するコンポーネントを実装する
    - _Requirements: 5.3_

- [ ] 5. データベース関連ファイルの整理
  - [ ] 5.1 マイグレーションファイルの整理
    - 既存のSQLファイルを分析し、マイグレーションファイルを特定する
    - マイグレーションファイルをdb/migrationsディレクトリに移動し、命名規則を統一する
    - _Requirements: 4.1, 4.2_
  
  - [ ] 5.2 スキーマ定義ファイルの作成
    - 最新のデータベーススキーマを定義するSQLファイルを作成する
    - database-design.mdの内容をSQLファイルに変換する
    - _Requirements: 4.2, 4.3_
  
  - [ ] 5.3 一時的なスクリプトの整理
    - 一時的なデータ修正スクリプトをdb/scriptsディレクトリに移動する
    - 不要なスクリプトを削除する
    - _Requirements: 1.2, 4.1_

- [ ] 6. 設定ファイルの整理
  - [ ] 6.1 環境変数の整理
    - .env.local.exampleファイルを更新し、必要な環境変数を明確にする
    - 重複した環境変数ファイルを削除する
    - _Requirements: 6.1, 6.2_
  
  - [ ] 6.2 ビルド設定の最適化
    - next.config.tsファイルを見直し、最適な設定を適用する
    - ESLint設定を見直し、コードスタイルの一貫性を確保する
    - _Requirements: 6.3_

- [ ] 7. コードスタイルの統一
  - [ ] 7.1 命名規則の統一
    - ファイル名の命名規則を統一する（kebab-case、PascalCase、camelCaseの使い分け）
    - 変数名、関数名、コンポーネント名の命名規則を統一する
    - _Requirements: 3.1_
  
  - [ ] 7.2 コードフォーマットの適用
    - Prettierを設定し、コードフォーマットを統一する
    - ESLintルールを適用し、コードスタイルを統一する
    - _Requirements: 3.1, 3.3_

- [ ] 8. ドキュメントの更新
  - [ ] 8.1 READMEの更新
    - プロジェクト構造の変更を反映したREADMEを作成する
    - セットアップ手順を更新する
    - _Requirements: 1.3, 6.2_
  
  - [ ] 8.2 コードコメントの改善
    - 複雑なロジックにコメントを追加する
    - 型定義にJSDocコメントを追加する
    - _Requirements: 3.3, 5.1_